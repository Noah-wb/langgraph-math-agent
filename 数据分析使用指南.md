# 数据分析使用指南

## 🎯 功能概述

本系统提供了强大的数据分析功能，可以自动分析data目录中的CSV文件并生成包含图表的专业分析报告。

## 📁 文件结构

```
langgraph-math-agent/
├── data/                                    # 数据文件目录
│   └── LLM电信产品包订购情况明细表_0613.csv  # CSV数据文件
├── src/
│   └── data_tools.py                        # 数据分析工具模块
├── sjfx/                                    # 分析报告输出目录
│   ├── analysis_report_YYYYMMDD_HHMMSS.md  # Markdown分析报告
│   ├── category_orders_pie.png             # 分类订购量饼图
│   ├── top_products_bar.png                # 热门产品柱状图
│   ├── price_distribution.png              # 价格分布直方图
│   └── growth_rate_analysis.png            # 增长率分析图
└── main.py                                 # 主程序入口
```

## 🚀 使用方法

### 方法1: 通过Agent对话分析

1. **启动程序**
   ```bash
   python main.py
   ```

2. **选择模型**
   - 选择可用的AI模型（DeepSeek/GLM/Kimi）

3. **与Agent对话**
   ```
   👤 你: 请分析data目录中的CSV文件并生成分析报告
   🤖 智能体: 我来帮您分析data目录中的CSV文件...
   ```

### 方法2: 直接脚本分析

1. **快速分析**
   ```bash
   python quick_analysis.py
   ```

2. **交互式分析**
   ```bash
   python example_analysis.py
   ```

### 方法3: 编程调用

```python
from src.data_tools import generate_analysis_report

# 分析指定CSV文件
report_file = generate_analysis_report("LLM电信产品包订购情况明细表_0613.csv", "sjfx")
print(f"报告已生成: {report_file}")
```

## 📊 生成的分析内容

### 1. 文本分析报告
- 数据概览和统计信息
- 分类分析和趋势分析
- 关键指标和洞察

### 2. 可视化图表
- **饼图**: 产品包分类订购量分布
- **柱状图**: 热门产品TOP10订购量
- **直方图**: 产品包价格分布
- **增长率图**: 同比增长率分析

### 3. Markdown报告
- 专业的报告格式
- 包含所有图表和数据分析
- 支持中文字体显示

## 🛠️ 支持的数据格式

### IPTV产品包数据
- 包含列：产品包名称、分类、单价、订购量、流水等
- 自动生成分类分析、价格分析、热门产品分析

### 时间序列数据
- 包含日期列和数值列
- 自动生成趋势分析、增长率分析

## 📋 输出文件说明

| 文件名 | 类型 | 说明 |
|--------|------|------|
| `analysis_report_*.md` | Markdown报告 | 完整的分析报告，包含所有分析结果和图表 |
| `category_orders_pie.png` | 饼图 | 产品分类订购量分布 |
| `top_products_bar.png` | 柱状图 | 热门产品TOP10 |
| `price_distribution.png` | 直方图 | 价格分布情况 |
| `growth_rate_analysis.png` | 柱状图 | 同比增长率分析 |

## 💡 使用技巧

1. **数据准备**
   - 确保CSV文件在`data/`目录中
   - 使用UTF-8编码保存文件
   - 包含中文列名时确保编码正确

2. **分析优化**
   - 数据量较大时分析时间会相应增加
   - 建议单次分析的数据行数不超过10000行

3. **报告查看**
   - 使用支持Markdown的编辑器查看报告
   - 推荐使用Typora、VS Code等工具

## 🔧 故障排除

### 常见问题

1. **文件读取失败**
   - 检查文件路径是否正确
   - 确认文件编码为UTF-8
   - 验证CSV格式是否正确

2. **图表生成失败**
   - 确保安装了matplotlib和seaborn
   - 检查数据是否包含数值列
   - 验证中文字体设置

3. **分析结果异常**
   - 检查数据质量
   - 确认列名和数据格式
   - 查看错误日志获取详细信息

## 📞 技术支持

如遇到问题，请检查：
1. Python环境和依赖包
2. 数据文件格式和编码
3. 系统日志文件
4. 错误提示信息

---

**注意**: 本系统专为中文数据分析优化，支持中文列名和中文内容显示。

